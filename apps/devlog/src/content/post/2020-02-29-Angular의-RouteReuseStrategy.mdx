---
title: Angularì˜ RouteReuseStrategy
categories: [development, angular]
tags: [angular, routereusestrategy]
updatedAt: 2020-05-14
description: Angularì˜ ë¼ìš°íŒ… ë™ì‘ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•  ìˆ˜ ìˆëŠ” RouteReuseStrategyë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤
---

# ğŸš€ RouteReuseStrategy

AngularëŠ” ë¼ìš°íŒ… ì‹œì ë§ˆë‹¤ RoutingModuleì— ì œê³µëœ Routes ì¤‘ ì´ì „ í˜ì´ì§€ì™€ ë‹¤ìŒ í˜ì´ì§€ì— í•´ë‹¹í•˜ëŠ” Route ê°ì²´ë¥¼ ì°¾ì•„ ì„œë¡œ ë¹„êµí•˜ì—¬ ë³€ê²½ì´ ìˆì„ ë•Œë§Œ ì»´í¬ë„ŒíŠ¸ë¥¼ êµì²´í•œë‹¤.

ë™ì¼í•œ Route ê°„ ì´ë™ ì‹œ. ê°™ì€ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë˜ë©° ì´ë¤„ì§€ëŠ” API í˜¸ì¶œì€ ì¤‘ë³µìœ¼ë¡œ íŒë‹¨í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ê°€ì´ë“œ ë¬¸ì„œì—ëŠ” ì—†ì§€ë§Œ, ì´ ë™ì‘ì€ ê°œë°œìê°€ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•  ìˆ˜ ìˆë‹¤.

ì˜ˆë¥¼ ë“¤ë©´ ìƒì„¸ì—ì„œ ëª©ë¡ìœ¼ë¡œ ë’¤ë¡œ ê°€ê¸°ë¡œ ì´ë™í–ˆì„ ë•ŒëŠ” ì›ë˜ Route ì„¤ì •ì´ ë‹¬ë¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì•¼ í•˜ì§€ë§Œ ëª©ë¡ì—ì„œ ìƒì„¸ë¡œ ì§„ì… ì‹œì ì— ëª©ë¡ ì»´í¬ë„ŒíŠ¸ ìƒíƒœë¥¼ ìºì‹œ í–ˆë‹¤ê°€ ë’¤ë¡œ ê°€ê¸° ì‹œì ì— ë³µì›í•˜ì—¬ API í˜¸ì¶œì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

ì´ [RouterReuseStrategy API ìƒì„¸ ì„¤ëª…](https://itnext.io/cache-components-with-angular-routereusestrategy-3e4c8b174d5f)ì„ ê°„ëµíˆ ì„¤ëª…í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```ts
export abstract class RouteReuseStrategy {
  /**
   * í˜„ì¬ ì´ë™ì— ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš© 'ì—¬ë¶€'ë¥¼ í™•ì¸í•œë‹¤
   * falseë°˜í™˜ ì‹œ ì¬ì‚¬ìš©ì—†ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œ ë§Œë“¤ê³ 
   * trueë¥¼ ë°˜í™˜í•˜ë©´ ì•„ë˜ 4ê°œì˜ ë©”ì„œë“œë¥¼ ìƒí™©ë³„ë¡œ í˜¸ì¶œí•˜ì—¬ ìºì‹œ ë° ë³µì›í•œë‹¤
   * (ìºì‹œ, ë³µì› ë¡œì§ì€ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•œë‹¤)
   */
  abstract shouldReuseRoute(
    future: ActivatedRouteSnapshot,
    curr: ActivatedRouteSnapshot
  ): boolean

  /**
   * í˜ì´ì§€ë¥¼ ë¹ ì ¸ë‚˜ê°ˆ ë•Œ í˜„ì¬ ì»´í¬ë„ŒíŠ¸ ìºì‹œ 'ì—¬ë¶€'ë¥¼ ë°˜í™˜í•œë‹¤
   * false ë°˜í™˜ ì‹œ ìºì‹œ ì•ˆí•´ë„ ë˜ëŠ”ê²ƒìœ¼ë¡œ íŒë‹¨
   * true ë°˜í™˜ ì‹œ ì•„ë˜ storeë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤
   */
  abstract shouldDetach(route: ActivatedRouteSnapshot): boolean

  /**
   * í˜ì´ì§€ ë¹ ì ¸ë‚˜ê°€ê¸° ì „ ìƒíƒœë¥¼ ìºì‹œí•œë‹¤
   * ìºì‹œë¥¼ ìœ„í•´ì„œ ë‘ ë²ˆì§¸ ì¸ìì¸ DetachedRouteHandleì„ ì–´ë”˜ê°€ì— ì €ì¥í•˜ë©´ ëœë‹¤
   */
  abstract store(
    route: ActivatedRouteSnapshot,
    handle: DetachedRouteHandle | null
  ): void

  /**
   * í˜ì´ì§€ ì§„ì… ì‹œì ì— ë³µì› 'ì—¬ë¶€'ë¥¼ ë°˜í™˜í•œë‹¤
   * false ë°˜í™˜ ì‹œ ë³µì› ì•ˆí•´ë„ ë˜ëŠ”ê²ƒìœ¼ë¡œ íŒë‹¨
   * true ë°˜í™˜ ì‹œ ì•„ë˜ retrieveë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤
   */
  abstract shouldAttach(route: ActivatedRouteSnapshot): boolean

  /**
   * í˜ì´ì§€ ì§„ì… ì‹œ ìºì‹œëœ ë°ì´í„°ë¥¼ ë³µì›í•œë‹¤
   * ìœ„ì—ì„œ êµ¬í˜„í•œ store ë©”ì„œë“œ í˜¸ì¶œ ì‹œì ì— ì–´ë”˜ê°€ì— ì €ì¥í–ˆë˜ ìºì‹œë¥¼ ë°˜í™˜í•˜ë©´ ëœë‹¤
   */
  abstract retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle | null
}
```

ìœ„ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ìµœìƒìœ„ NgModuleì— Providing í•´ ì£¼ë©´ ëœë‹¤.

Angularì˜ [DefaultRouteReuseStrategy](https://github.com/angular/angular/blob/5bc39f8c8d5238a9be9bd968cf18ea4b738bd6be/packages/router/src/route_reuse_strategy.ts#L65)ëŠ” [RouteConfig](https://angular.io/api/router/Route)ê°€ ê°™ì„ ë•Œ shouldReuseRouteì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ trueë¡œ ë°˜í™˜í•˜ê³  ìˆì§€ë§Œ. ê° ë©”ì„œë“œì—ì„œ ìºì‹œ ì—¬ë¶€(shouldDetach), ë³µì› ì—¬ë¶€(shouldAttach) ëª¨ë‘ falseë¥¼ ë°˜í™˜í•˜ê³  ìˆì–´ ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.

# RouterLinkê°€ ë™ì‘í•˜ì§€ ì•Šì•„ìš”

AngularëŠ” ì•ì„œ ì„¤ëª…í•œ ëŒ€ë¡œ ë¼ìš°íŒ… ì „, í›„ì˜ Route ê°ì²´ë¥¼ ë¹„êµí•˜ì—¬ ë‹¤ë¥¼ ë•Œë§Œ ì»´í¬ë„ŒíŠ¸ë¥¼ êµì²´í•œë‹¤. ë”°ë¼ì„œ ê°™ì€ Route ê°ì²´ ê°„ ì´ë™ì´ë¼ë©´ ì»´í¬ë„ŒíŠ¸ê°€ êµì²´ë˜ì§€ ì•ŠëŠ”ë‹¤.

```ts
const routes = [
  {
    path: 'detail/:id',
    component: DetailComponent,
  },
]
```

ìœ„ì˜ ë¼ìš°íŒ… ì„¤ì •ì—ì„œ ì•„ë˜ ì»´í¬ë„ŒíŠ¸ì˜ ë§í¬ í´ë¦­í•´ì„œ `'/detail/3'`ì—ì„œ `'/detail/12'`ë¡œ ì´ë™í–ˆë‹¤ë©´ ê°™ì€ Routeê°ì²´(ì •í™•íˆëŠ” ê°™ì€ ActivatedRouteSnapshot)ë¥¼ ë¹„êµí•œë‹¤.

ë”°ë¼ì„œ ì»´í¬ë„ŒíŠ¸ê°€ êµì²´ë˜ì§€ ì•Šì•„ `ngOnInit` ì„ ë¹„ë¡¯í•œ ë¼ì´í”„ì‚¬ì´í´ ë©”ì„œë“œë“¤ì´ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ë§Œì•½ `ngOnInit`ì—ì„œ `id`ë¥¼ ë°›ì•„ APIë¥¼ í˜¸ì¶œí•´ ìƒì„¸ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ë„ë¡ ê°œë°œí–ˆë‹¤ë©´ ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤.

```ts
@Component({
  selector: 'app-detail',
  template: `
    <h1>detail component</h1>
    <a routerLink="/detail/12">go to '/detail/12'</a>
    <div>{{ content }}</div>
  `,
})
export class DetailComponent {
  content = ''

  // '/detail/12'ë¡œ ì´ë™í–ˆì„ ë•ŒëŠ” í˜¸ì¶œë˜ì§€ ì•Šì•„ 3ë²ˆ ë°ì´í„°ë¥¼ ê³„ì† ë³´ì—¬ì¤€ë‹¤
  ngOnInit() {
    this.http
      .get(`/detail/${this.activatedRoute.snapshot.params.id}`)
      .subscribe((o) => (this.content = o))
  }
}
```

ì•„ë˜ ë°ëª¨ë¥¼ í†µí•´ ë¬¸ì œë¥¼ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆë‹¤.

<div class="aspect-ratio">
  <iframe src="https://stackblitz.com/edit/angular-routerlink-notwork?ctl=1&embed=1&file=src/app/detail/detail.component.css&hideExplorer=1&view=preview"></iframe>
</div>

ì´ëŸ° ê²½ìš° `ngOnInit`ì´ ì¬ì‹¤í–‰ë˜ì§€ ì•Šì•„ë„ ê°±ì‹ ë˜ë„ë¡ ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•˜ì—¬ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ì§€ë§Œ. RouteReuseStrategyë¥¼ ì´ìš©í•˜ì—¬ Route ê°ì²´ ë¹„êµë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•  ìˆ˜ ìˆê³ . ê°•ì œë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ êµì²´í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.

```ts
export class CustomRouteReuseStrategy extends RouteReuseStrategy {
  shouldDetach(route: ActivatedRouteSnapshot) {
    return false
  }

  store(route: ActivatedRouteSnapshot, detachedTree: DetachedRouteHandle) {}

  shouldAttach(route: ActivatedRouteSnapshot) {
    return false
  }

  retrieve(route: ActivatedRouteSnapshot) {
    return null
  }

  shouldReuseRoute(
    future: ActivatedRouteSnapshot,
    curr: ActivatedRouteSnapshot
  ) {
    const [futureUrl, currUrl] = [future, curr].map((o) =>
      o.url.map((seg) => seg.path).join('/')
    )

    /**
     * Routeë¹„êµ ì‹œ ë‘˜ ë‹¤ 'detail'ì„ í¬í•¨í•œ pathë¼ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼
     * ì¬ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ falseë¥¼ ë°˜í™˜í•œë‹¤.
     */
    if (futureUrl.includes('detail') && currUrl.includes('detail')) {
      return false
    }

    return future.routeConfig === curr.routeConfig
  }
}
```

ì•„ë˜ëŠ” ìœ„ `CustomRouteReuseStrategy`ë¥¼ ì´ìš©í•œ ê°•ì œ ì»´í¬ë„ŒíŠ¸ êµì²´ì˜ ì˜ˆì œì´ë‹¤.

<div class="aspect-ratio">
  <iframe src="https://stackblitz.com/edit/angular-routerlink-notwork-refactor?ctl=1&embed=1&file=src/app/custom-route-reuse-strategy.ts&hideExplorer=1&view=preview"></iframe>
</div>

# shouldReuseRouteëŠ” ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œëœë‹¤

> ğŸ‘€ Angular v8 ë²„ì „ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í–ˆìœ¼ë‚˜ v9 ì—ì„œë„ ë¹„ìŠ·í•˜ê²Œ ë™ì‘í•œë‹¤

Angularì˜ [RouteConfig](https://angular.io/api/router/Route)ëŠ” ì¬ê·€ì ìœ¼ë¡œ ì„ ì–¸í•  ìˆ˜ ìˆê²Œ ë˜ì–´ìˆë‹¤. ê·¸ë˜ì„œ `shouldReuseRoute`ì˜ `future`, `curr`íŒŒë¼ë¯¸í„°ëŠ” pathì— ëŒ€í•œ ì •ë³´ë¥¼ íŠ¸ë¦¬ êµ¬ì¡°ë¡œ ë‹´ê³  ìˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ì˜ˆì œë¥¼ í†µí•´ íŒŒì•…í•´ ë³´ì.

ë¨¼ì € ì•±ì˜ ë¼ìš°íŒ… ì„¤ì •ì´ ì•„ë˜ì²˜ëŸ¼ ì„ ì–¸ë˜ì–´ ìˆë‹¤ê³  ê°€ì •í•œë‹¤.

```ts
// app-routing.module.ts
const routes = [
  { path: 'list', component: ListComponent },
  { path: 'detail/:id', component: DetailComponent },
  {
    path: 'delivery',
    loadChildren: () =>
      import("'./delivery/delivery.module'").then((mod) => mod.DeliveryModule),
  },
]

// delivery-routing.module.ts
const routes = [{ path: 'detail/:id', component: DeliveryDetailComponent }]
```

ì•„ë˜ `RouteReuseStrategy`ëŠ” ê° í˜¸ì¶œ ë‹¨ê³„ì—ì„œ urlê³¼ í•´ë‹¹ `Route`ì™€ ì—°ê²°ëœ ì»´í¬ë„ŒíŠ¸ ì´ë¦„ì„ ì¶œë ¥í•œë‹¤. ì´ strategyë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ„ì˜ Route ì„¤ì •ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì´ë™ë“¤ì— ëŒ€í•œ í˜¸ì¶œ ë¡œê·¸ë¥¼ ë¶„ì„í•´ ë³´ì.

```ts
export class CustomRouteReuseStrategy implements RouteReuseStrategy {
  shouldReuseRoute(
    future: ActivatedRouteSnapshot,
    curr: ActivatedRouteSnapshot
  ) {
    // ë¶„ì„ì„ ìœ„í•´ íŒŒë¼ë¯¸í„°ë¥¼ ë¡œê¹…í•¨
    console.log(
      `[future]\n${getInfo(future)}\n\n[curr]:\n${getInfo(curr)}\n\n----------`
    )

    return future.routeConfig === curr.routeConfig
  }
}
```

_1. ì•± ì§„ì…_

```text
[future]
  â†’ '' / null
[curr]:
  â†’ '' / null
----------
```

ì•± ì§„ì… ì‹œì ì— í•œë²ˆ í˜¸ì¶œëœë‹¤. í° ì˜ë¯¸ëŠ” ì—†ë‹¤

_2. '' ì—ì„œ 'list'ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°_

```text
[future]
  â†’ '' / AppComponent
  â†’ 'list' / ListComponent
[curr]:
  â†’ '' / null
----------
```

`future`ë¥¼ ë³´ë©´ `''`ëŠ” AppComponent, `'list'`ëŠ” ListComponentì— ì œê³µë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

_3. 'list'ì—ì„œ 'detail/2'ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°_

```text
[future]
  â†’ '' / AppComponent
  â†’ 'detail/2' / DetailComponent
[curr]:
  â†’ '' / AppComponent
  â†’ 'list' / ListComponent
----------
[future]
  â†’ 'list' / ListComponent
[curr]:
  â†’ 'detail/2' / DetailComponent
----------
```

- `shoudReuseRoute`ê°€ ë‘ ë²ˆ í˜¸ì¶œë˜ê³  ìˆë‹¤.
- ì´ìƒí•œ ì ì´ ìˆëŠ”ë° ë‘ ë²ˆì§¸ í˜¸ì¶œì—ì„œëŠ” `future`, `curr`ê°’ì´ ë’¤ë°”ë€Œì—ˆë‹¤.
- `future`ë¥¼ ë³´ë©´ `AppComponent`ì—ëŠ” `:id`ì— í•´ë‹¹í•˜ëŠ” ë¬¸ìì—´ì´ ì—†ë‹¤. ë¼ìš°íŒ… ì„¤ì • ìì²´ë„ ê·¸ëŸ¬í•œë°. `AppComponent`ê°€ DI ë°›ëŠ” `ActivatedRouteSnapshot`ì—ì„œëŠ” `id`ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ëŠ” ì´ìœ ì´ê¸°ë„ í•˜ë‹¤.

_4. 'detail/2'ì—ì„œ 'delivery/detail/4'ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°_

```text
[future]
  â†’ '' / AppComponent
  â†’ 'delivery' / null
  â†’ 'detail/4' / DeliveryDetailComponent
[curr]:
  â†’ '' / AppComponent
  â†’ 'detail/2' / DetailComponent
----------
[future]
  â†’ 'detail/2' / DetailComponent
[curr]:
  â†’ 'delivery' / null
  â†’ 'detail/4' / DeliveryDetailComponent
----------
```

- 3ë²ˆì²˜ëŸ¼ ë‘ ë²ˆì§¸ í˜¸ì¶œì˜ `future`, `curr`ê°’ì´ ë’¤ë°”ë€Œì–´ ìˆë‹¤. [ê´€ë ¨ PR](https://github.com/angular/angular/issues/16192)ì´ ìˆëŠ”ë° ì•„ì§ ë³„ë‹¤ë¥¸ ì—…ë°ì´íŠ¸ê°€ ì—†ë‹¤.
- ì²« shouldReuseRouteì˜ í˜¸ì¶œì—ì„œ `future`íŒŒë¼ë¯¸í„°ë¥¼ ë³´ë©´`loadChildren`ì„ ì‚¬ìš©í•œ `Route`ì—ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì—†ë‹¤.

ë‘ ë²ˆì”© í˜¸ì¶œë˜ëŠ” ì´ìœ ëŠ” ì–´ë””ì—ë„ ë‚˜ì™€ ìˆì§€ ì•Šì§€ë§Œ. [ê´€ë ¨ ì½”ë“œ](https://github.com/angular/angular/blob/3e51a1998304ab6a15e5bea6bc66e7a8c636a8ad/packages/router/src/create_router_state.ts)ë¥¼ ë³¼ ë•Œ ë‘ ë²ˆì”© í˜¸ì¶œí•˜ë”ë¼ë„ ì»´í¬ë„ŒíŠ¸ì— ì˜¬ë°”ë¥¸ ë¼ìš°íŒ… ìƒíƒœë¥¼ ì¤„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë”°ë¡œ ì •ë¦¬í•˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ë”°ë¼ì„œ êµ¬í˜„ í•  ë•Œ ì£¼ì˜ê°€ í•„ìš”í•˜ë‹¤.

# ìƒí’ˆìƒì„¸, ëª©ë¡ ê°„ ì»´í¬ë„ŒíŠ¸ ìºì‹± ì˜ˆì œ

ìƒì„¸, ëª©ë¡ í˜ì´ì§€ì˜ ê²½ìš° ìƒì„¸ì—ì„œ ë’¤ë¡œê°€ê¸° ì‹œ ì´ì „ì— ë³´ê³  ìˆë˜ ëª©ë¡ê³¼ ìŠ¤í¬ë¡¤ì„ ìœ ì§€í•˜ë©´ í˜ì´ì§€ íƒìƒ‰ ì‚¬ìš©ì„±ì„ í¬ê²Œ ê°œì„ í•  ìˆ˜ ìˆë‹¤. íŠ¹íˆ ì „ììƒê±°ë˜ ì„œë¹„ìŠ¤ì˜ ê²½ìš° ë§¤ì¶œê³¼ ì§ê²°ë˜ëŠ” ë¶€ë¶„ì´ê¸°ë„ í•˜ë‹¤.

ìºì‹±ì„ ìœ„í•´ ì¼ë°˜ì ìœ¼ë¡œ bfcacheì— ì˜ì¡´í•˜ê±°ë‚˜. ìƒì„¸ ì§„ì… ì „ì˜ ì•± ìƒíƒœë¥¼ persistë¡œ ì €ì¥í–ˆë‹¤ê°€ ë³µì›í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•˜ëŠ”ë°. ë‘ ë°©ë²•ì€ ì½”ë“œë² ì´ìŠ¤ ì™¸ì ì¸ ë¶€ë¶„ì— ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— ê´€ë¦¬ê°€ ì–´ë µê³  ì‚¬ì´ë“œì´í™íŠ¸ê°€ ìˆì„ ìˆ˜ ìˆë‹¤.

RouteReuseStrategyë¥¼ ì´ìš©í•œ ë°©ë²•ì€ ìºì‹±ì´ í•„ìš”í•œ êµ¬ê°„ì— ë¶€ë¶„ì ìœ¼ë¡œ ì ìš©í•´ì•¼ í•˜ì§€ë§Œ êµ¬í˜„ì´ ì½”ë“œë² ì´ìŠ¤ ì•ˆì— ìˆìœ¼ë¯€ë¡œ ì•ì„œ ì–¸ê¸‰í•œ ë¬¸ì œì—ì„œ ììœ ë¡­ë‹¤. ê°€ëŠ¥í•œ ì´ ë°©ë²•ì„ ë„ì…í•˜ëŠ” ê²ƒì´ ì¢‹ì•„ ë³´ì¸ë‹¤.

<div class="aspect-ratio">
  <iframe src="https://stackblitz.com/edit/angular-list-detail-reuse-example?ctl=1&embed=1&file=src/app/api.service.ts&hideExplorer=1&view=preview"></iframe>
</div>

ìœ„ ë°ëª¨ëŠ” ìƒí’ˆëª©ë¡ ìƒì„¸ ì˜ˆì œì´ë‹¤. ì›ë˜ë¼ë©´ ìƒì„¸ì—ì„œ ë’¤ë¡œ ê°€ê¸°ë¡œ ëª©ë¡ìœ¼ë¡œ ëŒì•„ì™”ì„ ë•Œ ì»´í¬ë„ŒíŠ¸ê°€ êµì²´ì–´ ë²„ë¦¬ë¯€ë¡œ í™”ë©´ì´ ê¹œë¹¡ì´ë©° 1ë²ˆì§¸ í˜ì´ì§€ë¶€í„° ìƒˆë¡œ ê·¸ë¦¬ê³ . ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë„ ìƒì–´ë²„ë¦°ë‹¤.

```ts
export class CustomRouteReuseStrategy extends RouteReuseStrategy {
  private cache = new Map<string, DetachedRouteHandle>()

  shouldDetach(route: ActivatedRouteSnapshot) {
    // ëª©ë¡ì—ì„œ ë¹ ì ¸ë‚˜ê°ˆ ë•Œ trueë°˜í™˜í•˜ì—¬ storeë¥¼ í˜¸ì¶œí•œë‹¤
    if (getPath(route).startsWith('list')) {
      return true
    }

    return false
  }

  store(route: ActivatedRouteSnapshot, detachedTree: DetachedRouteHandle) {
    // ì»´í¬ë„ŒíŠ¸ ìƒíƒœ ìºì‹œ
    this.cache.set(getPath(route), detachedTree)
  }

  shouldAttach(route: ActivatedRouteSnapshot) {
    const path = getPath(route)

    // ëª©ë¡ ì¬ì§„ì… ì‹œ ìºì‹œê°€ ìˆë‹¤ë©´ trueë°˜í™˜í•˜ì—¬ retrieveë¥¼ í˜¸ì¶œí•œë‹¤
    if (path.startsWith('list') && this.cache.has(path)) {
      return true
    }

    return false
  }

  retrieve(route: ActivatedRouteSnapshot) {
    // ì»´í¬ë„ŒíŠ¸ ìƒíƒœ ë³µì›
    return this.cache.get(getPath(route))
  }

  shouldReuseRoute(
    future: ActivatedRouteSnapshot,
    curr: ActivatedRouteSnapshot
  ) {
    return future.routeConfig === curr.routeConfig
  }
}
```

í•˜ì§€ë§Œ ë³¸ë¬¸ì—ì„œ ì„¤ëª…í•œ RouteReuseStrategyë¥¼ ìƒì†í•œ ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´ ìºì‹œëœ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë³µì›í•˜ê¸° ë•Œë¬¸ì— ìƒí’ˆëª©ë¡ ì»´í¬ë„ŒíŠ¸ê°€ ê¹œë¹¡ì´ì§€ ì•Šê³  ê³§ë°”ë¡œ ë Œë”ë§ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
